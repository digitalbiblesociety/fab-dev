import{E as l,s as q,F as w,G as z,H as S,I as A}from"./index-a4306a73.js";const c=[];function g(s,i){return{subscribe:h(s,i).subscribe}}function h(s,i=l){let o;const r=new Set;function a(t){if(q(s,t)&&(s=t,o)){const n=!c.length;for(const e of r)e[1](),c.push(e,s);if(n){for(let e=0;e<c.length;e+=2)c[e][0](c[e+1]);c.length=0}}}function f(t){a(t(s))}function b(t,n=l){const e=[t,n];return r.add(e),r.size===1&&(o=i(a)||l),t(s),()=>{r.delete(e),r.size===0&&(o(),o=null)}}return{set:a,update:f,subscribe:b}}function j(s,i,o){const r=!Array.isArray(s),a=r?[s]:s,f=i.length<2;return g(o,b=>{let t=!1;const n=[];let e=0,d=l;const p=()=>{if(e)return;d();const u=i(r?n[0]:n,b);f?b(u):d=S(u)?u:l},y=a.map((u,_)=>w(u,m=>{n[_]=m,e&=~(1<<_),t&&p()},()=>{e|=1<<_}));return t=!0,p(),function(){z(y),d()}})}var E=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",derived:j,readable:g,writable:h,get:A});export{j as d,g as r,E as s,h as w};
